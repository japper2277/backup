<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neighborhood Filter Demo</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Font fallbacks and base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        
        .neighborhood-pill {
            @apply inline-flex items-center px-3 py-2 rounded-full text-sm font-medium cursor-pointer transition-all duration-200;
            @apply bg-gray-700 text-gray-200 hover:bg-gray-600;
        }
        
        .neighborhood-pill.active {
            @apply bg-violet-600 text-white hover:bg-violet-700;
        }
        
        .neighborhood-pill .count {
            @apply ml-2 px-2 py-0.5 text-xs rounded-full bg-gray-600 text-gray-200;
        }
        
        .neighborhood-pill.active .count {
            @apply bg-violet-500 text-white;
        }
        
        .mic-card {
            @apply bg-white rounded-lg shadow-md p-4 border-l-4 transition-all duration-200;
        }
        
        .mic-card:hover {
            @apply shadow-lg transform -translate-y-1;
        }
        
        .mic-card.free {
            @apply border-green-500;
        }
        
        .mic-card.paid {
            @apply border-purple-500;
        }
        
        .mic-card.drink {
            @apply border-yellow-500;
        }
        
        .filter-section {
            @apply bg-gray-800 rounded-lg p-4 mb-6;
        }
        
        .filter-title {
            @apply text-lg font-semibold text-white mb-3;
        }
        
        .filter-subtitle {
            @apply text-sm font-medium text-gray-400 mb-2;
        }
        
        .active-filters {
            @apply flex flex-wrap gap-2 mb-4;
        }
        
        .active-filter-pill {
            @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-violet-600 text-white;
        }
        
        .active-filter-pill .remove {
            @apply ml-2 cursor-pointer hover:text-violet-200;
        }
        
        /* Icon fallbacks */
        .icon-calendar::before { content: "üìÖ "; }
        .icon-clock::before { content: "üïê "; }
        .icon-search::before { content: "üîç "; }
        .icon-remove::before { content: "‚úï"; }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-violet-400 mb-2">Neighborhood Filter Demo</h1>
            <p class="text-gray-400">Interactive demo of neighborhood-based mic filtering</p>
        </header>

        <!-- Filter Controls -->
        <div class="filter-section">
            <h2 class="filter-title">Location Filters</h2>
            
            <!-- Borough Filter -->
            <div class="mb-4">
                <h3 class="filter-subtitle">Borough</h3>
                <div class="flex flex-wrap gap-2">
                    <button class="neighborhood-pill" data-borough="Manhattan">Manhattan</button>
                    <button class="neighborhood-pill" data-borough="Brooklyn">Brooklyn</button>
                    <button class="neighborhood-pill" data-borough="Queens">Queens</button>
                    <button class="neighborhood-pill" data-borough="Bronx">Bronx</button>
                </div>
            </div>
            
            <!-- Neighborhood Filter -->
            <div>
                <h3 class="filter-subtitle">Neighborhoods</h3>
                <div class="flex flex-wrap gap-2" id="neighborhood-filters">
                    <!-- Neighborhood pills will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Active Filters Display -->
        <div class="filter-section">
            <h2 class="filter-title">Active Filters</h2>
            <div id="active-filters" class="active-filters">
                <span class="text-gray-400">No filters selected</span>
            </div>
        </div>

        <!-- Results Summary -->
        <div class="filter-section">
            <h2 class="filter-title">Results</h2>
            <div class="flex items-center justify-between mb-4">
                <span class="text-gray-300">Showing <span id="results-count" class="font-bold text-violet-400">0</span> mics</span>
                <button id="clear-filters" class="px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-colors">
                    Clear All Filters
                </button>
            </div>
        </div>

        <!-- Mic Results -->
        <div id="mic-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Mic cards will be populated by JavaScript -->
        </div>
    </div>

    <script>
        // Sample mic data
        const sampleMics = [
            { id: 1, venue: "Comedy Cellar", neighborhood: "West Village", borough: "Manhattan", day: "Monday", time: "8:00 PM", cost: "free", address: "117 MacDougal St" },
            { id: 2, venue: "Gotham Comedy Club", neighborhood: "Chelsea", borough: "Manhattan", day: "Tuesday", time: "9:00 PM", cost: "paid", address: "208 W 23rd St" },
            { id: 3, venue: "Eastville Comedy Club", neighborhood: "East Village", borough: "Manhattan", day: "Wednesday", time: "8:30 PM", cost: "drink", address: "85 E 4th St" },
            { id: 4, venue: "Stand Up NY", neighborhood: "Upper West Side", borough: "Manhattan", day: "Thursday", time: "7:00 PM", cost: "free", address: "236 W 78th St" },
            { id: 5, venue: "Brooklyn Comedy Collective", neighborhood: "Williamsburg", borough: "Brooklyn", day: "Friday", time: "8:00 PM", cost: "free", address: "167 Graham Ave" },
            { id: 6, venue: "Creek and the Cave", neighborhood: "Long Island City", borough: "Queens", day: "Saturday", time: "9:30 PM", cost: "drink", address: "10-93 Jackson Ave" },
            { id: 7, venue: "New York Comedy Club", neighborhood: "East Village", borough: "Manhattan", day: "Sunday", time: "8:00 PM", cost: "paid", address: "85 E 4th St" },
            { id: 8, venue: "Greenwich Village Comedy Club", neighborhood: "West Village", borough: "Manhattan", day: "Monday", time: "9:00 PM", cost: "free", address: "99 MacDougal St" },
            { id: 9, venue: "Brooklyn Stand Up", neighborhood: "Park Slope", borough: "Brooklyn", day: "Tuesday", time: "8:30 PM", cost: "drink", address: "123 7th Ave" },
            { id: 10, venue: "Queens Comedy Club", neighborhood: "Astoria", borough: "Queens", day: "Wednesday", time: "7:30 PM", cost: "free", address: "456 Broadway" },
            { id: 11, venue: "Manhattan Comedy", neighborhood: "Chelsea", borough: "Manhattan", day: "Thursday", time: "8:00 PM", cost: "paid", address: "789 8th Ave" },
            { id: 12, venue: "Downtown Comedy", neighborhood: "Financial District", borough: "Manhattan", day: "Friday", time: "9:00 PM", cost: "free", address: "123 Wall St" }
        ];

        // Filter state
        let activeFilters = {
            boroughs: [],
            neighborhoods: []
        };

        // Initialize the demo
        function initDemo() {
            renderNeighborhoodFilters();
            renderMicResults();
            setupEventListeners();
        }

        // Render neighborhood filter pills
        function renderNeighborhoodFilters() {
            const container = document.getElementById('neighborhood-filters');
            
            // Get unique neighborhoods with counts
            const neighborhoodCounts = {};
            sampleMics.forEach(mic => {
                if (!neighborhoodCounts[mic.neighborhood]) {
                    neighborhoodCounts[mic.neighborhood] = 0;
                }
                neighborhoodCounts[mic.neighborhood]++;
            });

            // Create neighborhood pills
            const neighborhoodPills = Object.entries(neighborhoodCounts)
                .sort(([,a], [,b]) => b - a) // Sort by count descending
                .map(([neighborhood, count]) => `
                    <button class="neighborhood-pill" data-neighborhood="${neighborhood}">
                        ${neighborhood} <span class="count">${count}</span>
                    </button>
                `).join('');

            container.innerHTML = neighborhoodPills;
        }

        // Render mic results
        function renderMicResults() {
            const container = document.getElementById('mic-results');
            const filteredMics = getFilteredMics();
            
            document.getElementById('results-count').textContent = filteredMics.length;
            
                         if (filteredMics.length === 0) {
                 container.innerHTML = `
                     <div class="col-span-full text-center py-12">
                         <span class="icon-search text-6xl text-gray-600 mb-4 block">üîç</span>
                         <h3 class="text-xl font-semibold text-gray-400 mb-2">No mics found</h3>
                         <p class="text-gray-500">Try adjusting your filters</p>
                     </div>
                 `;
                 return;
             }

                         const micCards = filteredMics.map(mic => `
                 <div class="mic-card ${getCostClass(mic.cost)}">
                     <div class="flex justify-between items-start mb-2">
                         <h3 class="font-semibold text-gray-800">${mic.venue}</h3>
                         <span class="text-xs px-2 py-1 rounded-full ${getCostBadgeClass(mic.cost)}">
                             ${getCostLabel(mic.cost)}
                         </span>
                     </div>
                     <p class="text-sm text-gray-600 mb-2">${mic.address}</p>
                     <div class="flex items-center justify-between text-sm">
                         <span class="text-gray-500">
                             <span class="icon-calendar mr-1"></span>${mic.day}
                         </span>
                         <span class="text-gray-500">
                             <span class="icon-clock mr-1"></span>${mic.time}
                         </span>
                     </div>
                     <div class="mt-2 pt-2 border-t border-gray-100">
                         <span class="text-xs text-violet-600 font-medium">${mic.neighborhood}</span>
                         <span class="text-xs text-gray-400 ml-2">${mic.borough}</span>
                     </div>
                 </div>
             `).join('');

            container.innerHTML = micCards;
        }

        // Get filtered mics based on active filters
        function getFilteredMics() {
            return sampleMics.filter(mic => {
                // Borough filter
                if (activeFilters.boroughs.length > 0 && !activeFilters.boroughs.includes(mic.borough)) {
                    return false;
                }
                
                // Neighborhood filter
                if (activeFilters.neighborhoods.length > 0 && !activeFilters.neighborhoods.includes(mic.neighborhood)) {
                    return false;
                }
                
                return true;
            });
        }

        // Render active filters
        function renderActiveFilters() {
            const container = document.getElementById('active-filters');
            const allActiveFilters = [...activeFilters.boroughs, ...activeFilters.neighborhoods];
            
            if (allActiveFilters.length === 0) {
                container.innerHTML = '<span class="text-gray-400">No filters selected</span>';
                return;
            }

                         const filterPills = allActiveFilters.map(filter => `
                 <span class="active-filter-pill">
                     ${filter}
                     <span class="remove" onclick="removeFilter('${filter}')">‚úï</span>
                 </span>
             `).join('');

            container.innerHTML = filterPills;
        }

        // Helper functions
        function getCostClass(cost) {
            switch(cost) {
                case 'free': return 'free';
                case 'paid': return 'paid';
                case 'drink': return 'drink';
                default: return '';
            }
        }

        function getCostBadgeClass(cost) {
            switch(cost) {
                case 'free': return 'bg-green-100 text-green-800';
                case 'paid': return 'bg-purple-100 text-purple-800';
                case 'drink': return 'bg-yellow-100 text-yellow-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function getCostLabel(cost) {
            switch(cost) {
                case 'free': return 'Free';
                case 'paid': return 'Paid';
                case 'drink': return '1 Drink Min';
                default: return cost;
            }
        }

        // Filter management
        function toggleFilter(type, value) {
            const filterArray = activeFilters[type];
            const index = filterArray.indexOf(value);
            
            if (index > -1) {
                filterArray.splice(index, 1);
            } else {
                filterArray.push(value);
            }
            
            updateFilters();
        }

        function removeFilter(value) {
            // Remove from both arrays
            activeFilters.boroughs = activeFilters.boroughs.filter(b => b !== value);
            activeFilters.neighborhoods = activeFilters.neighborhoods.filter(n => n !== value);
            
            updateFilters();
        }

        function clearAllFilters() {
            activeFilters.boroughs = [];
            activeFilters.neighborhoods = [];
            updateFilters();
        }

        function updateFilters() {
            // Update UI state
            updateFilterButtonStates();
            renderActiveFilters();
            renderMicResults();
        }

        function updateFilterButtonStates() {
            // Update borough buttons
            document.querySelectorAll('[data-borough]').forEach(btn => {
                const borough = btn.dataset.borough;
                btn.classList.toggle('active', activeFilters.boroughs.includes(borough));
            });
            
            // Update neighborhood buttons
            document.querySelectorAll('[data-neighborhood]').forEach(btn => {
                const neighborhood = btn.dataset.neighborhood;
                btn.classList.toggle('active', activeFilters.neighborhoods.includes(neighborhood));
            });
        }

        // Event listeners
        function setupEventListeners() {
            // Borough filter clicks
            document.addEventListener('click', (e) => {
                if (e.target.matches('[data-borough]')) {
                    toggleFilter('boroughs', e.target.dataset.borough);
                }
                
                if (e.target.matches('[data-neighborhood]')) {
                    toggleFilter('neighborhoods', e.target.dataset.neighborhood);
                }
            });
            
            // Clear filters button
            document.getElementById('clear-filters').addEventListener('click', clearAllFilters);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initDemo);
    </script>
</body>
</html>
